appId: nl.amsterdam.app.dev
---
- runFlow:
    file: ./utils/initializeChat.yaml

- extendedWaitUntil:
    visible:
      id: ChatStartingTimeEntryPhrase

- scrollUntilVisible:
    element:
      id: ChatEntryText
      index: 1
      traits: text

- runFlow:
    file: ./utils/selectLanguage.yaml

- runFlow:
    file: "./utils/sendMessage.yaml"
    env:
      TEXT: "Ik wil een melding doen."

- runFlow:
    file: "./utils/selectButton.yaml"
    env:
      BUTTON_ID: ".*ChatHistoryChoices.*"
      BUTTON_INDEX: "0" # Ja

- runFlow:
    file: "./utils/selectButton.yaml"
    env:
      BUTTON_ID: ".*ChatHistoryChoices.*"
      BUTTON_INDEX: "3" # Andere vraag

- runFlow:
    file: ./utils/toggleVisibility.yaml
    env:
      HIDDEN_ELEMENT_ID: ContactChatButton

- runFlow:
    file: ./utils/closeChat.yaml

# The easiest way to test incoming messages in background using Maestro is to immediately minimize the chat after start. Therefore we start an additional chat below.
- runFlow:
    file: ./utils/awaitInitiatingChatInBackground.yaml

# The most reliable close chat action is done immediately after chat start. Therefore we perform another closeChat flow below.
- runFlow:
    file: ./utils/closeChat.yaml
