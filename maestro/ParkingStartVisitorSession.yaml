appId: nl.amsterdam.app.dev
jsEngine: graaljs
---
- launchApp:
    clearState: true
- runScript: parking/scripts/getRandomLicensePlate.js
- runFlow:
    file: parking/shared/InitStartSession.yaml
    env:
      PERMIT: 'Op bezoek.*'
      REPORT_CODE: __PARKING_ACCOUNT_VISITOR_REPORT_CODE__
      PIN_CODE: __PARKING_ACCOUNT_VISITOR_PIN_CODE__
- tapOn:
    id: ParkingGoToStartSessionKraskaartvergunningButton
- tapOn:
    id: ParkingVisitorLicensePlateInputFieldInput
- inputText: ${output.licensePlate}
- pressKey: Enter
- runFlow:
    file: parking/shared/ChooseEndTimeSpinner.yaml
- runFlow:
    file: parking/shared/ChoosePaymentZone.yaml
- scrollUntilVisible:
    element:
      id: ParkingStartSessionKraskaartvergunningButton
- tapOn:
    id: ParkingStartSessionKraskaartvergunningButton
- tapOn:
    text: 'Sta toe|Allow'
    optional: true
- runFlow:
    file: shared/OpenAppFromDeeplink.yaml
    when:
      platform: iOS
- assertVisible:
    id: ParkingStartSessionSuccessAlertWrapper
